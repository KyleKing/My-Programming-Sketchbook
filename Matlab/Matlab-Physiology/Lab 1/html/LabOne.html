
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>LabOne</title><meta name="generator" content="MATLAB 8.3"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2014-09-30"><meta name="DC.source" content="LabOne.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">A. See Paper Notes</a></li><li><a href="#3">B. Plot in Matlab</a></li><li><a href="#4">Part B, #1 - General</a></li><li><a href="#6">Part 2 -  at given position</a></li><li><a href="#7">Part 3 - plot</a></li><li><a href="#8">Part 4 - subplot</a></li><li><a href="#10">C. Linear Models to evaluate a dialysis machines</a></li></ul></div><pre class="codeinput"><span class="comment">% Kyle King</span>
<span class="comment">% BIOE340 - Section 0102</span>
<span class="comment">% Lab Assignment #1</span>
<span class="comment">% 9-30-2014</span>
</pre><h2>A. See Paper Notes<a name="2"></a></h2><h2>B. Plot in Matlab<a name="3"></a></h2><pre class="codeinput">clc, clear <span class="string">all</span> <span class="comment">% boilerplate</span>
</pre><h2>Part B, #1 - General<a name="4"></a></h2><p>Check to make sure the function file is accessible</p><pre class="codeinput"><span class="keyword">if</span> (exist(<span class="string">'LabOneB1.m'</span>, <span class="string">'file'</span>) == 2)
</pre><pre class="codeinput">  disp(<span class="string">'B. Part 1'</span>)

  tTime = 25; <span class="comment">% s</span>

  <span class="comment">% Declare constants</span>
  Csi = 46.00;  <span class="comment">% A solute starts in the blood at concentration of 46 mM</span>
  Vo = 30;      <span class="comment">% The blood flows at a speed of 30 cm/sec</span>

  <span class="comment">% Write a MATLAB code to calculate the concentration profile of a solute (solute A) over the following regions of time:</span>
  L0 = 10*30; <span class="comment">% Calculate distance of the first tube: 10 s * 30 cm/s</span>
  M = [0, 0, 0.35, 0, 0.65, 0];
  L = [0, L0, 150, 75, 165, 60];
  <span class="comment">% solid tubes for the first 10 seconds (10 s * 30 cm/s)</span>
  <span class="comment">% At t = 10 seconds, the blood encounters the first filter that removes</span>
    <span class="comment">% the solute at an efficiency of 0.35 mM/sec (This region is 150 cm long)</span>
  <span class="comment">% A is too large to diffuse through the membrane, which is 75 cm long</span>
  <span class="comment">% a filter that can remove the solute at 0.65 mM/sec. This region is 165 cm long</span>
  <span class="comment">% The final 60 cm of travel is again solid tubing</span>

  <span class="comment">% Calculate concentrations in separate function file</span>
  Cf1 = LabOneB1(Csi, Vo, M, L, 1, 1);
</pre><pre class="codeoutput">B. Part 1
At l = 0 cm and time = 0 s, the concentration is 46 mM
At l = 0 cm and time = 0 s, the concentration is 46 mM
 and there is no change in concentration

At l = 300 cm and time = 10 s, the concentration is 46 mM
 and there is no change in concentration

At l = 450 cm and time = 15 s, the concentration is 44.25 mM
 and the change is -1.75 mM

At l = 525 cm and time = 17.5 s, the concentration is 44.25 mM
 and there is no change in concentration

At l = 690 cm and time = 23 s, the concentration is 40.675 mM
 and the change is -3.575 mM

At l = 750 cm and time = 25 s, the concentration is 40.675 mM
 and there is no change in concentration

</pre><h2>Part 2 -  at given position<a name="6"></a></h2><pre class="codeinput">  disp([13 <span class="string">'B. Part 2'</span>])

  Lf = 410 - L0; <span class="comment">% Manually calculated position of 410 cm</span>

  <span class="comment">% Declare constants</span>
  <span class="comment">% Use less efficient parameters</span>
  M2 = [0, 0, 0.35];
  L2 = [0, L0, Lf];

  <span class="comment">% Calculate answer to part 2 on the fly, because why not?</span>
  Cf2 = LabOneB1(Csi, Vo, M2, L2, 0, 0);
  <span class="keyword">if</span> (Cf2 &gt; 45)
    disp(<span class="string">'The system has a smaller theoretical concentration than in nature'</span>)
  <span class="keyword">elseif</span> (Cf2 == 45)
    disp(<span class="string">'The theoretical value is equal to the measured value'</span>)
  <span class="keyword">else</span>
    disp([<span class="string">'The system has a slightly lower efficiency than expected in the model'</span> <span class="keyword">...</span>
     10 <span class="string">'('</span> num2str(Cf2) <span class="string">' mM compared to 45 mM). This could be due to the assumption'</span> <span class="keyword">...</span>
      10 <span class="string">'that the blood was a constant mixture, instead the concentration is'</span> 10 <span class="keyword">...</span>
       <span class="string">'variable throughout the blood meaning that the actual diffusion will'</span> 10 <span class="keyword">...</span>
        <span class="string">'be lower than theoretical.'</span>])
  <span class="keyword">end</span>
</pre><pre class="codeoutput">B. Part 2
The system has a slightly lower efficiency than expected in the model
(44.7167 mM compared to 45 mM). This could be due to the assumption
that the blood was a constant mixture, instead the concentration is
variable throughout the blood meaning that the actual diffusion will
be lower than theoretical.
</pre><h2>Part 3 - plot<a name="7"></a></h2><pre class="codeinput">  disp([13 <span class="string">'B. Part 3 - See first subplot'</span>])

  <span class="comment">% Calculate the time array to use to plot the x-axis</span>
  Times = L./Vo;
  <span class="comment">% Turn time into a cumulative array by first declaring and then looping for plotting</span>
  cumTimes(1) = 0;
  <span class="keyword">for</span> i = 2:length(Cf1)
    cumTimes(i) = cumTimes(i-1) + Times(i);
  <span class="keyword">end</span>

  <span class="comment">% Plot the time versus concentration</span>
  figure(1), subplot(1,2,1), plot(cumTimes,Cf1,<span class="string">'-dk'</span>), legend(<span class="string">'Solute A'</span>)
  title(<span class="string">'Concentration of Solute A in Blood as a Function of Time'</span>)
  xlabel(<span class="string">'Time (sec)'</span>),  ylabel(<span class="string">'Concentration (mM)'</span>), axis([0, tTime, 40, 47.5])
</pre><pre class="codeoutput">B. Part 3 - See first subplot
</pre><img vspace="5" hspace="5" src="LabOne_01.png" alt=""> <h2>Part 4 - subplot<a name="8"></a></h2><pre class="codeinput">  disp(<span class="string">'B. Part 4 - See second subplot'</span>)

  M3 = [0, 0, 0.25, 0, 0.35, 0]; <span class="comment">% Use new less-efficient filtering values</span>
  Cf3 = LabOneB1(Csi, Vo, M3, L, 0, 1); <span class="comment">% Calculate an array of concentrations</span>

  subplot(1,2,2), plot(cumTimes, Cf3, <span class="string">'-db'</span>), legend(<span class="string">'Solute B'</span>)
  title(<span class="string">'Concentration of Solute B in Blood as a Function of Time'</span>)
  xlabel(<span class="string">'Time (sec)'</span>), ylabel(<span class="string">'Concentration (mM)'</span>), axis([0, tTime, 40, 47.5])
</pre><pre class="codeoutput">B. Part 4 - See second subplot
</pre><pre class="codeinput"><span class="keyword">else</span>
  disp([<span class="string">'Error: No Function file found'</span> 10 <span class="keyword">...</span>
   <span class="string">'Make sure that the function is in the same directory and properly labeled as LabOneB1.m'</span> <span class="keyword">...</span>
   10 <span class="string">'If no file, copy and paste the code on lines 3-38 of function LabOne into a new file named LabOneB1.m'</span>])
<span class="keyword">end</span>
</pre><img vspace="5" hspace="5" src="LabOne_02.png" alt=""> <h2>C. Linear Models to evaluate a dialysis machines<a name="10"></a></h2><pre class="codeinput">disp([13 <span class="string">'C. Part 1'</span>])

A = [33.4, 8.1, 34.5, 35.2; 49.4, 4.2, 49.4, 47.5; 68.3, 6.0, 38.5, 25.1; 57.1, 3.2, 31.2, 61.2];
<span class="comment">% syms Po C Ph U; m_X = [Po; C; Ph; U];</span>
m_X = {<span class="string">'W'</span>; <span class="string">'X'</span>; <span class="string">'Y'</span>; <span class="string">'Z'</span>};
M = [489.8; 598.2; 692.7; 588.4];

<span class="comment">% Perform the Gaussian Elimination</span>
[gausselim, m_X, solution] = LabOneC1(A, m_X, M);

<span class="comment">% caluclate size of b</span>
[heightb, lengthb] = size(M);
<span class="comment">% Then use the size to display each value equal to the solution matrix</span>
disp([13 <span class="string">'The solution matrix: '</span>])
<span class="keyword">for</span> count = 1:heightb
  disp([m_X{count} <span class="string">' = '</span> num2str(solution(count)) <span class="string">' L/min'</span>])
<span class="keyword">end</span>
</pre><pre class="codeoutput">C. Part 1
The solution matrix: 
Y = 6.6259 L/min
W = 14.9642 L/min
X = 3.2623 L/min
Z = 0.98682 L/min
</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014a</a><br></p></div><!--
##### SOURCE BEGIN #####
% Kyle King
% BIOE340 - Section 0102
% Lab Assignment #1
% 9-30-2014

%% A. See Paper Notes

%% B. Plot in Matlab

clc, clear all % boilerplate

%% Part B, #1 - General
% Check to make sure the function file is accessible
if (exist('LabOneB1.m', 'file') == 2)

  disp('B. Part 1')

  tTime = 25; % s

  % Declare constants
  Csi = 46.00;  % A solute starts in the blood at concentration of 46 mM
  Vo = 30;      % The blood flows at a speed of 30 cm/sec

  % Write a MATLAB code to calculate the concentration profile of a solute (solute A) over the following regions of time:
  L0 = 10*30; % Calculate distance of the first tube: 10 s * 30 cm/s
  M = [0, 0, 0.35, 0, 0.65, 0];
  L = [0, L0, 150, 75, 165, 60];
  % solid tubes for the first 10 seconds (10 s * 30 cm/s)
  % At t = 10 seconds, the blood encounters the first filter that removes
    % the solute at an efficiency of 0.35 mM/sec (This region is 150 cm long)
  % A is too large to diffuse through the membrane, which is 75 cm long
  % a filter that can remove the solute at 0.65 mM/sec. This region is 165 cm long
  % The final 60 cm of travel is again solid tubing

  % Calculate concentrations in separate function file
  Cf1 = LabOneB1(Csi, Vo, M, L, 1, 1);

  %% Part 2 -  at given position
  disp([13 'B. Part 2'])

  Lf = 410 - L0; % Manually calculated position of 410 cm

  % Declare constants
  % Use less efficient parameters
  M2 = [0, 0, 0.35];
  L2 = [0, L0, Lf];

  % Calculate answer to part 2 on the fly, because why not?
  Cf2 = LabOneB1(Csi, Vo, M2, L2, 0, 0);
  if (Cf2 > 45)
    disp('The system has a smaller theoretical concentration than in nature')
  elseif (Cf2 == 45)
    disp('The theoretical value is equal to the measured value')
  else
    disp(['The system has a slightly lower efficiency than expected in the model' ...
     10 '(' num2str(Cf2) ' mM compared to 45 mM). This could be due to the assumption' ...
      10 'that the blood was a constant mixture, instead the concentration is' 10 ...
       'variable throughout the blood meaning that the actual diffusion will' 10 ...
        'be lower than theoretical.'])
  end

  %% Part 3 - plot
  disp([13 'B. Part 3 - See first subplot'])

  % Calculate the time array to use to plot the x-axis
  Times = L./Vo;
  % Turn time into a cumulative array by first declaring and then looping for plotting
  cumTimes(1) = 0;
  for i = 2:length(Cf1)
    cumTimes(i) = cumTimes(i-1) + Times(i);
  end

  % Plot the time versus concentration
  figure(1), subplot(1,2,1), plot(cumTimes,Cf1,'-dk'), legend('Solute A')
  title('Concentration of Solute A in Blood as a Function of Time')
  xlabel('Time (sec)'),  ylabel('Concentration (mM)'), axis([0, tTime, 40, 47.5])

  %% Part 4 - subplot

  disp('B. Part 4 - See second subplot')

  M3 = [0, 0, 0.25, 0, 0.35, 0]; % Use new less-efficient filtering values
  Cf3 = LabOneB1(Csi, Vo, M3, L, 0, 1); % Calculate an array of concentrations

  subplot(1,2,2), plot(cumTimes, Cf3, '-db'), legend('Solute B')
  title('Concentration of Solute B in Blood as a Function of Time')
  xlabel('Time (sec)'), ylabel('Concentration (mM)'), axis([0, tTime, 40, 47.5])

else
  disp(['Error: No Function file found' 10 ...
   'Make sure that the function is in the same directory and properly labeled as LabOneB1.m' ...
   10 'If no file, copy and paste the code on lines 3-38 of function LabOne into a new file named LabOneB1.m'])
end

%% C. Linear Models to evaluate a dialysis machines

disp([13 'C. Part 1'])

A = [33.4, 8.1, 34.5, 35.2; 49.4, 4.2, 49.4, 47.5; 68.3, 6.0, 38.5, 25.1; 57.1, 3.2, 31.2, 61.2];
% syms Po C Ph U; m_X = [Po; C; Ph; U];
m_X = {'W'; 'X'; 'Y'; 'Z'};
M = [489.8; 598.2; 692.7; 588.4];

% Perform the Gaussian Elimination
[gausselim, m_X, solution] = LabOneC1(A, m_X, M);

% caluclate size of b
[heightb, lengthb] = size(M);
% Then use the size to display each value equal to the solution matrix
disp([13 'The solution matrix: '])
for count = 1:heightb
  disp([m_X{count} ' = ' num2str(solution(count)) ' L/min'])
end

##### SOURCE END #####
--></body></html>